/*! For license information please see ReactCrop.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactCrop=t(require("react")):e.ReactCrop=t(e.React)}(this,(function(e){return(()=>{"use strict";var t={631:(e,t)=>{var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(e,t,i){var o=null;if(void 0!==i&&(o=""+i),void 0!==t.key&&(o=""+t.key),"key"in t)for(var s in i={},t)"key"!==s&&(i[s]=t[s]);else i=t;return t=i.ref,{$$typeof:r,type:e,key:o,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=o,t.jsxs=o},893:(e,t,r)=>{e.exports=r(631)},899:t=>{t.exports=e}},r={};function i(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{Component:()=>u,containCrop:()=>p,default:()=>u,makeAspectCrop:()=>h});var e=i(893),t=i(899);function r(e){var t,i,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=r(e[t]))&&(o&&(o+=" "),o+=i);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}const s={x:0,y:0,width:0,height:0,unit:"px"};function n(e,t,r){return Math.min(Math.max(e,t),r)}function a(e){return e&&e.width&&!isNaN(e.width)&&e.height&&!isNaN(e.height)}function h(e,t,r){if(!e.aspect||isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),{...s,...e};const i={unit:"px",x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0,aspect:e.aspect};return e.width&&(i.height=i.width/e.aspect),e.height&&(i.width=i.height*e.aspect),i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*e.aspect),i.x+i.width>t&&(i.width=t-i.x,i.height=i.width/e.aspect),i}function d(e,t,r){return"%"===e.unit?{...s,...e}:{unit:"%",aspect:e.aspect,x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0}}function c(e,t,r){return e.unit?"px"===e.unit?{...s,...e}:{unit:"px",aspect:e.aspect,x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:{...s,...e,unit:"px"}}function p(e,t,r,i){const o=c(t,r,i),s=c(e,r,i);return o.aspect?(o.x<0?(o.width=o.x+o.width,o.x=0,o.height=o.width/o.aspect):o.x+o.width>r&&(o.width=r-o.x,o.height=o.width/o.aspect),s.y>o.y&&(o.x+o.width>=r||o.x<=0)&&(o.y=s.y),o.y<0?(o.height=o.y+o.height,o.y=0,o.width=o.height*o.aspect):o.y+o.height>i&&(o.height=i-o.y,o.width=o.height*o.aspect),o.x<s.x&&o.y+o.height>=i&&(o.x=s.x),o):(o.x<0?(o.width+=o.x,o.x=0):o.x+o.width>r&&(o.width=r-o.x),o.y+o.height>i&&(o.height=i-o.y),o)}const l={capture:!0,passive:!1};class u extends t.PureComponent{constructor(){super(...arguments),this.keysDown=new Set,this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={clientStartX:0,clientStartY:0,cropStartWidth:0,cropStartHeight:0,cropStartX:0,cropStartY:0,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.componentRef=(0,t.createRef)(),this.mediaWrapperRef=(0,t.createRef)(),this.imageRef=(0,t.createRef)(),this.cropSelectRef=(0,t.createRef)(),this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:r}=this.props,{width:i,height:o}=this.mediaDimensions,s=c(t,i,o);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const{ord:n}=e.target.dataset,a="nw"===n||"w"===n||"sw"===n,h="nw"===n||"n"===n||"ne"===n;this.evData={clientStartX:e.clientX,clientStartY:e.clientY,cropStartWidth:s.width,cropStartHeight:s.height,cropStartX:a?s.x+s.width:s.x,cropStartY:h?s.y+s.height:s.y,xDiff:0,yDiff:0,xInversed:a,yInversed:h,xCrossOver:a,yCrossOver:h,lastYCrossover:h,startXCrossOver:a,startYCrossOver:h,isResize:Boolean(n),ord:n||"ne"},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:r,locked:i,keepSelection:o,onChange:s,zoom:n=1,spin:h=0}=this.props,p=this.mediaWrapperRef.current.firstChild;if(e.target!==p||!p.contains(e.target))return;if(r||i||o&&a(t))return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=this.mediaWrapperRef.current.getBoundingClientRect();let u=0,g=0,f=(e.clientX-l.left)/n,m=(e.clientY-l.top)/n,v=h,w=Math.abs(v*Math.PI/180);v>-45&&v<=45||Math.abs(v)>135&&Math.abs(v)<=180?(u=f*Math.cos(w),g=m*Math.cos(w)):v>45&&v<=135?(u=m*Math.sin(w),g=f*Math.sin(w)*-1):v>-135&&v<=-45&&(u=m*Math.sin(w)*-1,g=f*Math.sin(w));const C={unit:"px",aspect:t?t.aspect:void 0,x:u,y:g,width:0,height:0};this.evData={clientStartX:e.clientX,clientStartY:e.clientY,cropStartWidth:C.width,cropStartHeight:C.height,cropStartX:C.x,cropStartY:C.y,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0;const{width:y,height:x}=this.mediaDimensions;s(c(C,y,x),d(C,y,x)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:r,onChange:i,onDragStart:o,zoom:s=1,spin:n=0}=this.props;if(r)return;if(!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,o&&o(e));const{evData:a}=this;let h,p=(e.clientX-a.clientStartX)/s,l=(e.clientY-a.clientStartY)/s,u=n,g=Math.abs(u*Math.PI/180);if(u>-45&&u<=45||Math.abs(u)>135&&Math.abs(u)<=180?(a.xDiff=p*Math.cos(g),a.yDiff=l*Math.cos(g)):u>45&&u<=135?(a.xDiff=l*Math.sin(g),a.yDiff=p*Math.sin(g)*-1):u>-135&&u<=-45&&(a.xDiff=l*Math.sin(g)*-1,a.yDiff=p*Math.sin(g)),h=a.isResize?this.resizeCrop():this.dragCrop(),h!==t){const{width:e,height:t}=this.mediaDimensions;i(c(h,e,t),d(h,e,t))}},this.onComponentKeyDown=e=>{const{crop:t,disabled:r,onChange:i,onComplete:o}=this.props;if(r)return;this.keysDown.add(e.key);let s=!1;if(!a(t))return;const h=this.makeNewCrop(),p=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep;if(this.keysDown.has("ArrowLeft")&&(h.x-=p,s=!0),this.keysDown.has("ArrowRight")&&(h.x+=p,s=!0),this.keysDown.has("ArrowUp")&&(h.y-=p,s=!0),this.keysDown.has("ArrowDown")&&(h.y+=p,s=!0),s){e.cancelable&&e.preventDefault();const{width:t,height:r}=this.mediaDimensions;h.x=n(h.x,0,t-h.width),h.y=n(h.y,0,r-h.height);const s=c(h,t,r),a=d(h,t,r);i(s,a),o&&o(s,a)}},this.onComponentKeyUp=e=>{this.keysDown.delete(e.key)},this.onDocPointerDone=e=>{const{crop:t,disabled:r,onComplete:i,onDragEnd:o}=this.props;if(this.unbindDocMove(),!r&&this.mouseDownOnCrop){this.mouseDownOnCrop=!1,this.dragStarted=!1;const{width:r,height:s}=this.mediaDimensions;o&&o(e),i&&i(c(t,r,s),d(t,r,s)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}},this.onMediaLoaded=()=>{const{onComplete:e,onChange:t}=this.props,{pixelCrop:r,percentCrop:i}=this.createNewCrop();t(r,i),e&&e(r,i)},this.onImageLoad=e=>{const{onComplete:t,onChange:r,onImageLoaded:i}=this.props;if(!1!==(!i||i(e.currentTarget))){const{pixelCrop:e,percentCrop:i}=this.createNewCrop();r(e,i),t&&t(e,i)}}}componentDidMount(){this.componentRef.current&&this.componentRef.current.addEventListener("medialoaded",this.onMediaLoaded)}componentWillUnmount(){this.componentRef.current&&this.componentRef.current.removeEventListener("medialoaded",this.onMediaLoaded)}componentDidUpdate(e){const{crop:t,onChange:r,onComplete:i}=this.props;if(this.imageRef.current&&t&&e.crop!==t&&t.aspect&&(t.width&&!t.height||!t.width&&t.height)){const{width:e,height:t}=this.imageRef.current,o=h(this.makeNewCrop(),e,t),s=c(o,e,t),n=d(o,e,t);r(s,n),i&&i(s,n)}}bindDocMove(){this.docMoveBound||(document.addEventListener("pointermove",this.onDocPointerMove,l),document.addEventListener("pointerup",this.onDocPointerDone,l),document.addEventListener("pointercancel",this.onDocPointerDone,l),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(document.removeEventListener("pointermove",this.onDocPointerMove,l),document.removeEventListener("pointerup",this.onDocPointerDone,l),document.removeEventListener("pointercancel",this.onDocPointerDone,l),this.docMoveBound=!1)}createNewCrop(){const{width:e,height:t}=this.mediaDimensions,r=(i=this.makeNewCrop(),o=e,s=t,!i.aspect||i.width&&i.height?i:h(i,o,s));var i,o,s;return{pixelCrop:c(r,e,t),percentCrop:d(r,e,t)}}get mediaDimensions(){let e=0,t=0;return this.mediaWrapperRef.current&&(e=this.mediaWrapperRef.current.clientWidth,t=this.mediaWrapperRef.current.clientHeight),{width:e,height:t}}getCropStyle(){const e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}getNewSize(){const{crop:e,minWidth:t=0,maxWidth:r,minHeight:i=0,maxHeight:o}=this.props,{evData:s}=this,{width:a,height:h}=this.mediaDimensions;let d,c=s.cropStartWidth+s.xDiff;return s.xCrossOver&&(c=Math.abs(c)),c=n(c,t,r||a),d=e.aspect?c/e.aspect:s.cropStartHeight+s.yDiff,s.yCrossOver&&(d=Math.min(Math.abs(d),s.cropStartY)),d=n(d,i,o||h),e.aspect&&(c=n(d*e.aspect,0,a)),{width:c,height:d}}dragCrop(){const e=this.makeNewCrop(),{evData:t}=this,{width:r,height:i}=this.mediaDimensions;return e.x=n(t.cropStartX+t.xDiff,0,r-e.width),e.y=n(t.cropStartY+t.yDiff,0,i-e.height),e}resizeCrop(){const{evData:e}=this,{crop:t,minWidth:r=0,minHeight:i=0}=this.props,o=this.makeNewCrop(),{ord:s}=e;e.xInversed&&(e.xDiff-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight);const n=this.getNewSize();let a=e.cropStartX,h=e.cropStartY;e.xCrossOver&&(a=o.x+(o.width-n.width)),e.yCrossOver&&(h=!1===e.lastYCrossover?o.y-n.height:o.y+(o.height-n.height));const{width:d,height:c}=this.mediaDimensions,l=p(this.props.crop,{unit:o.unit,x:a,y:h,width:n.width,height:n.height,aspect:o.aspect},d,c);return o.aspect||u.xyOrds.indexOf(s)>-1?(o.x=l.x,o.y=l.y,o.width=l.width,o.height=l.height):u.xOrds.indexOf(s)>-1?(o.x=l.x,o.width=l.width):u.yOrds.indexOf(s)>-1&&(o.y=l.y,o.height=l.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),o.width<r||o.height<i?t:o}getRotatedCursor(e,t){if(t>-135&&t<=-45||t>45&&t<=135)switch(e){case"nw":return{cursor:"ne-resize"};case"n":return{cursor:"w-resize"};case"ne":return{cursor:"nw-resize"};case"e":return{cursor:"s-resize"};case"se":return{cursor:"sw-resize"};case"s":return{cursor:"e-resize"};case"sw":return{cursor:"se-resize"};case"w":return{cursor:"n-resize"}}}createCropSelection(){const{disabled:t,locked:r,renderSelectionAddon:i,ruleOfThirds:o,crop:s,spin:n=0}=this.props,h=this.getCropStyle();return(0,e.jsxs)("div",{style:h,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,children:[!t&&!r&&(0,e.jsxs)("div",{className:"ReactCrop__drag-elements",children:[(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",style:this.getRotatedCursor("nw",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",style:this.getRotatedCursor("n",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",style:this.getRotatedCursor("ne",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",style:this.getRotatedCursor("e",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",style:this.getRotatedCursor("se",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",style:this.getRotatedCursor("s",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",style:this.getRotatedCursor("sw",n)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",style:this.getRotatedCursor("w",n)},void 0)]},void 0),i&&a(s)&&(0,e.jsx)("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation(),children:i(this.state)},void 0),o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-hz"},void 0),(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-vt"},void 0)]},void 0)]},void 0)}makeNewCrop(e="px"){const t={...s,...this.props.crop||{}},{width:r,height:i}=this.mediaDimensions;return"px"===e?c(t,r,i):d(t,r,i)}crossOverCheck(){const{evData:e}=this,{minWidth:t,minHeight:r}=this.props;!t&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!r&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver)}render(){const{children:t,circularCrop:i,className:o,crossorigin:s,crop:n,disabled:h,imageStyle:d,locked:c,imageAlt:p,onImageError:l,renderComponent:u,scale:g=1,src:f,style:m,rotate:v=0,ruleOfThirds:w}=this.props,{cropIsActive:C,newCropIsBeingDrawn:y}=this.state,x=a(n)&&this.componentRef?this.createCropSelection():null,D=function(){for(var e,t,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}("ReactCrop",o,{"ReactCrop--active":C,"ReactCrop--disabled":h,"ReactCrop--locked":c,"ReactCrop--new-crop":y,"ReactCrop--fixed-aspect":n&&n.aspect,"ReactCrop--circular-crop":n&&i,"ReactCrop--rule-of-thirds":n&&w,"ReactCrop--invisible-crop":!this.dragStarted&&n&&!n.width&&!n.height});return(0,e.jsxs)("div",{ref:this.componentRef,className:D,style:m,onPointerDown:this.onComponentPointerDown,tabIndex:0,onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp,children:[(0,e.jsx)("div",{ref:this.mediaWrapperRef,style:{transform:`scale(${g}) rotate(${v}deg)`},children:u||(0,e.jsx)("img",{ref:this.imageRef,crossOrigin:s,className:"ReactCrop__image",style:d,src:f,onLoad:this.onImageLoad,onError:l,alt:p},void 0)},void 0),t,x]},void 0)}}u.xOrds=["e","w"],u.yOrds=["n","s"],u.xyOrds=["nw","ne","se","sw"],u.nudgeStep=1,u.nudgeStepMedium=10,u.nudgeStepLarge=100})(),o})()}));